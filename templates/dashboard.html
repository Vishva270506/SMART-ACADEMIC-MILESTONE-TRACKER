<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<div class="container">

    <!-- LEFT SIDEBAR -->
    <div class="sidebar">
        <h2>iStudent</h2>
        <p class="menu active">Dashboard</p>
        <p class="menu">Tasks</p>
        <p class="menu">Progress</p>
    </div>

    <!-- MAIN CONTENT -->
    <div class="main">

       <div style="display:flex; justify-content:space-between; align-items:center;">
    <h2>Welcome, {{ username }} ðŸ‘‹</h2>

    <a href="/logout" class="logout">Logout</a>
</div>


        <!-- CARDS -->
        <div class="cards">
            <div class="card">
                <h3>Total Tasks</h3>
                <p>{{ tasks|length }}</p>
            </div>
           <div class="card">
    <h3>Progress</h3>
    <div class="progress-bar">
        <div class="progress-fill" style="width: {{ progress }}%"></div>
    </div>
    <p>{{ progress }}%</p>
</div>
<!-- STATISTICS -->
<div class="stats">
    <h3>Statistics</h3>

    <div class="stat-box">
        <div class="bar">
            <div class="bar-fill completed" style="height: {{ completed * 20 }}px"></div>
        </div>
        <p>Completed<br>{{ completed }}</p>

        <div class="bar">
            <div class="bar-fill pending" style="height: {{ pending * 20 }}px"></div>
        </div>
        <p>Pending<br>{{ pending }}</p>
    </div>
</div>


        <!-- ADD TASK -->
        <div class="add-task">
            <h3>Add New Task</h3>
            <form action="/add_task" method="post">
                <input name="title" placeholder="Task name" required>
                <input type="date" name="deadline" required>
                <button>Add Task</button>
            </form>
        </div>

        <!-- TASK LIST -->
        <div class="tasks">
    <h3>Your Tasks</h3>
     <div class="filters">
    <a href="/dashboard?filter=all"
       class="{% if filter_type == 'all' %}active-filter{% endif %}">
        All
    </a>

    <a href="/dashboard?filter=completed"
       class="{% if filter_type == 'completed' %}active-filter{% endif %}">
        Completed
    </a>

    <a href="/dashboard?filter=pending"
       class="{% if filter_type == 'pending' %}active-filter{% endif %}">
        Pending
    </a>
</div>

    {% for task in tasks %}
    <div class="task">
        <span>
    {{ task[2] }}
    <small>({{ task[3] }})</small>

    {% if task[5] == "overdue" %}
        <span class="status overdue">Overdue</span>
    {% elif task[5] == "due" %}
        <span class="status due">Due Soon</span>
    {% else %}
        <span class="status ontrack">On Track</span>
    {% endif %}
</span>

        <div>
            {% if task[4] == 0 %}
                <a href="/complete/{{ task[0] }}" class="complete">Mark Done</a>
            {% else %}
                <span class="done">Completed</span>
            {% endif %}
            <a href="/edit/{{ task[0] }}" class="edit">Edit</a>

            <a href="/delete/{{ task[0] }}" class="delete">Delete</a>
        </div>
    </div>
    {% endfor %}
</div>


</body>
</html>
